<!DOCTYPE html> 
<html ng-app="ContactListApp">
    <head>
        <title>Contact list with Mean Stack</title>
        <script type="text/javascript" src="angular.js"></script>
        <link rel="stylesheet" type="text/css" href="bootstrap.css">
        <link rel="stylesheet" type="text/css" href="bootstrap-theme.css">
        <script>
            angular.module("ContactListApp",[]);
        </script>
         <script type="text/javascript" src="controllers.js"></script>
    </head>
    <body ng-controller="mainCtrl">
        <div class="container">
            <h1>{{username}} Contact List App with MEAN stack</h1>
            <table class="table table-striped table-bordered" ng-if="isAuth">
                <thead>
                    <tr><th>Name</th><th>E-mail</th><th>phone number</th><th>Action</th></tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input class="form-control" type="text" name="name" ng-model="contact.name"></td>
                       <td><input class="form-control" type="text" name="email" ng-model="contact.email"></td>
                       <td><input class="form-control" type="text" name="number" ng-model="contact.number"></td>
                       <td>
                        <button class="btn btn-primary" ng-click="addContact()" ng-if="!editing">Add Contact</button>
                        <button class="btn btn-primary" ng-click="editContact()" ng-if="editing">Update</button>
                        <button class="btn btn-primary" ng-click="clear()" ng-if="editing">cancel</button>   
                    </td>
                    </tr>
                    <tr ng-repeat="p in persons">
                        <td>{{p.name}}</td>
                        <td>{{p.email}}</td>
                        <td>{{p.number}}</td>
                        <td>
                            <button class="btn btn-warning" ng-click="startEditContact(p._id)">Edit</button>
                            <button class="btn btn-danger" ng-click="removeContact(p._id)">Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
            <button class="btn btn-primary" ng-click="loadData()" ng-if="isAuth">Get Data</button>
            <div class="form-group" ng-if="!isAuth">
                <label for="name">User name:</label>
                <input type="text" name="name" ng-model="usr.username" placeholder="username"> 
            </div>
            <div class="form-group" ng-if="!isAuth">
                <label for="password">Password:</label>
                <input type="password" name="name" ng-model="usr.password" placeholder="password">
            </div>
            <button class="btn btn-primary" ng-click="login()">Log in</button>
            
            <button ng-click="logout()" ng-if="isAuth">Log out</button>
        </div>
    </body>
</html>